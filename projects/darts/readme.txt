///////////////////////////////////////////////////////////////////////////////////////

/  -   дефолтное окно.
  -- нет авторизации - выводит описание сайта, окно входа, регистрация, калькулятор darts, вопрос-ответ
  -- есть авторизация - информация о идущих турнирах, логаут, вход в информацию об аккаунте.

/register - окно регистрации
  -- нет авторизации - окно регистрации
  -- есть авторизация - информация об аккаунте.

///////////////////////////////////////////////////////////////////////////////////////


Хочется :
 - сетевая игра.  	для этого: 
 	- чат
 	- выбор игрока из другого тира чатом
 	
 - HTA application / для этого
 	- узнать формат mime'ов
 	- может быть chm?
 	
 - менюшка с выбором игр.
 
 - интерфейс своровать у Darts pro		
 	
 	Как я писал darts
 	-- рисуем Доску
 Первые версии Дартс'а были снабжены утащенными откуда-то где-то картинками. 
 Самая первая -
 фотографией нашей доски, обработанной слегка фотошопом. Как одна из фич программы
 рассматривалась автоматическая подгонка размера доски под размер экрана юзера.
 Для такого, к сожалению, фотографии не подходили, слишком заметны деффекты 
 изображения в Web-разрешении, растянутом на весь экран. Так что мысль - а не 
 нарисовть ли нам доску в фотошопе родилась и была внимательно рассмотрена.
 
 Основной проблемой при рисовании доски, как не странно, была точность расположения
 секторов. Рисовать вручную 20 линий, обрамлять их кругами, а потом еще и раскрашивать
 (Впрочем - раскрашивать-то как раз несложно ;) ) оказалось нетривиально. А когда пришлось еще и
 цифирки по кругу располагать это и совсем ужас! К счастию, Adobe придумал как прикрутить к своему
 во многиз отношениях замечательному PhotoShop'у JavaScript.
      
 

 ///////////////////////
 

 Юзер сохраняется (кэшируется) в сессии на время. через 10 минут после первого сохранения кэша юзер с правами перечитывается.
 
    
 ведется Адресная книга - с именами и кординатами людей, играющих в тире.
 
 У аккаунта есть привязка к ОДНОЙ строчке адресной книги. (ее можно сменить), либо акаунт помечен как публичный, тогда просмотр 
 статистики по игрокам не возможен.
 
 при создании тира создается турнир самого верхнего, нулевого уровня. Все игроки тира 
 включаются в него как участники. Турнир стартует как "турнир-заголовок" без ограничений 
 по играм и по правилам. Производится подсчет рейтинга по результатам турниров клуба.

 ----------------------------------------------
 комплект окон и форм
 
 -- главная страница, открывается, пока пользователь не зарегистрировался
 -- главная страница зарегистрировавшегося пользователя включает список новостей по всем клубам пользователя
 
 -- временные invite-ссылки открывают пользователю на время вправа на конкретный рессурс - турнир или клуб 
 без необходимости заводить аккаунт на сайте  
 
 ==
 -- окно регистрации аккаунта - после регистрации происходит автоматический вход 
 в систему.
 -- окно создания клуба
 -- окно создания турнира
 -- окно добавления пользователей
 -- окно заявки на игру турнира
 
 -------------------------------------------------
 Технология работы с турнирными таблицами.
 
 Для хранения и эффективной работы с турнирами (футбол, дартс) в общем виде с проведением 
 разбивки участников турнира по группам, проведения в аждой группе разных вариантов турнирова
 справляется конструкция из 3-х таблиц БД.
 Адресная книга - 
 PLAYERS
 ID, PLAYERS_INFO... 
 
 Список турниров
 TOURNAMANT
 ID, PARENT, LEVEL, NAME, RULE, STATUS
 
 Список игроков турнира
 TPLAYERS
 ID_PLAYER, ID_TOURNAMENT, NUMBER, RES1, RES2, RES3, ...
 
    
  К примеру, Чемпионат мира по футболу будет
  X1=Турнир(name:'Чемпионат мира',level:0,parent:0,rule:'заголовок');
  Этот турнир включает в себя разбивку по группам
  X2=Турнир(name:'группа А',level:1,parent:Турнир('Чемпионат мира),rule:'таблица');
  Для этого турнира вводятся подтурниры, содержащие только по 2 участника A и Б
  Турнир(name:'игра A vs Б',level:2,parent:Турнир(name:'группа А'),rule:'встреча'); 
  Этот турнир содержит пару турниров для игра на своем поле и на выезде
  X3=Турнир(name:'встреча A vs Б',level:2,parent:Турнир('игра A vs Б'),rule:'встреча');
  В каждом из этих турниров заявлено по 2 участника с результатом
  Игрок(A, турнира X3, забито 4 гола, результат: 1);
  игрок(Б, турнира X3, забито 1 гол, результат: 0);
  
  Ссответственно класс, реализующий функционал турнира имеет методы
  -- записать результаты игры
  -- обсчитать собственные результаты
  -- в случае окончания турнира записать результаты в турнир-родитель.
  
  в качестве результата игры (обсчета турнира) вводится массив очков (забитые голы, и так далее) 
  и очковый результат для хранения в вышестоящей таблице - количество очков с этой игры.
  
  Итак. 
  -- перед началом игры будет сформирована запись о начале турнира('встреча A vs Б') с игроками А и Б и пустыми результатами.
  -- после первой игры команд А и Б будут заполнены результаты встречи в поля игроков, результаты игры будут записаны в верхний турнир "игра"
  -- после второй игры и записи результатов второй втстречи, класс, обрабатывающий турнир 
  "игра" поймет, что он завершился и обсчитав свои результаты дернет функцию сохранения верхнего турнира.
  в качестве результатов "игры" будет сумма результирующих очков "встречи".
  
  Дартс
  Турнир Новый год разбит на 4 группы, в каждой из которых проводится табличный турнир.
  2 победителя из групп (8 человек) участвуют в "финской" системе турнира для выявления победителя и раскладки по местам.
  
  0 уровень - турнир(Новый Год| заголовок) с 20 игроками
  1 турнир(группа1)...турнир(группа 4)
  1 уровень - финская система
  
  
  результат игры выдается калькулятором в виде
  --Игрок:A, очки:501, дротики:30; Игрок:Б, очки:304, дротики :27;--
  это выродится в 2 записи в TPLAYERS
  (A,X4,501,30,0,1) - 1 очко за победу
  (Б,X4,304,30,0,0) - 0 очко за победу, 
  X4 - турнир 4 уровня "лэг, игра 301". Сразу после записи он сохраняет очковые результаты в 
  верхний турнир "игра до 3х побед"
  X3 - турнир 3 уровня с правилом "до 3-х побед"
  (A,X3,1,средний набор,0,0) - 1 очко за победу
  (Б,X3,0,средний набор,0,0) - 0 очко за победу,
  
  как только количество победных очков достигнет 3-х, турнир игра до 3х побед завершается, обсчитывается ее результат
  (A,X2,3,средний набор,0,1) - 1 очко за победу
  (Б,X2,1,средний набор,0,0) - 0 очков ,
  и результат записывается в таблицу верхнего уровня - "турнирная таблица"
  (A,X1,1,средний набор,0,0) - 1 очко за победу
  (Б,X1,0,средний набор,0,0) - 0 очко за победу,
  (В,X1,0,средний набор,0,0) - 1 очко за победу
  (Г,X1,0,средний набор,0,0) - 0 очко за победу,
  (Д,X1,0,средний набор,0,0) - 1 очко за победу
  (Е,X1,0,средний набор,0,0) - 0 очко за победу,
  
  Таким образом для построения полной турнирной таблицы турнира уровня 1 нужно получить всех его
  детей уровня 3. этих данных будет достаточно для заполнения. 
    
 ---------------------------------------------------------------------------------
 Клуб - это турнир с уровнем 0
 обычно его роль - "title"
     
 ---------------------------------------------------------------------------------
 Для хранения информации о турнире требуется 
 -- таблица турниров с обязательными полями
 ---- имя турнира
 ---- уровень
 ---- предок - для проключения турниров в деревянную конструкцию
 ---- дата - не знаю пока зачем, но наверное пригодится
 ---- статус - закончен или идет турнир для вывода в менюшках
 ---- роль - способ организации турниров в иерархическую 
  	модель, роль каждого турнира в иерархии
 ---- описание - сериализованный массив дополнительных параметров турнира
 
 По дополнительным параметрам поиска средствами базы данных не производится
  		
-- В каждом турнире имеются игроки, они включаются в турнир таблицей с полями
---- индекс турнира 
---- индекс игрока  из адресной книги  
---- номер игрока в турнире
---- набор из 6 полей с результатами игрока в турнире  

Если нет учетной записи на сайте:
 -- Заходим на сайт и создаем учетную запись кнопкой "регистрация"
 -- вводим логин, пароль (2 раза)
 -- цифирки на капче
 
 -- после регистрации попадаем в окно редактирования профиля,
   где можно поменять пароль,
   уточнить тип аккаунта (личный, групповой)
 -- для личного акаунта нужно сообщить свои имя-фамилию для вставки 
   игрока в новый клуб.
    
   сообщить свои имя-фамилию, если аккаунт личный. 


Пример:
турнир "новогодний", разбит на несколько подгрупп
- начинающие - просто соревнуются друг с другом, "набор очков"
- женская группа- просто соревнуются друг с другом, "набор очков"
- группа А, группа B,группа C,группа D - отборочные турниры в 301, каждый с каждым;
2 победителя от каждой группы участвуют в "финке"
- финальный турнир по финской системе

создается турнир "новогодний" с параметрами 
Способ проведения - "групповой турнир". Определять участников этого турнира не обязательно.
Нажав достаточное количество раз на кнопку "добавить турнир" добавляем 7 турниров

выбираем первый турнир и 
- даём ему имя "начинающие".
- добавляем ему игроков из списка игроков турнира 
- способ проведения - "каждый с каждым"
- игра - "набор очков"
- по окончании - ""
- способ отображения игроков в турнирной таблице (по алфавиту, по месту в турнире)

 
   
  